{% extends "network/layout.html" %}

{% block body %}
<div class="container">

<div class="profile-header">
    <h2>{{ profile_user.username }}</h2>

    {% if user.is_authenticated and user != profile_user %}
        <form method="post" action="{% url 'follow_user' profile_user.username %}">
            {% csrf_token %}
            {% if is_following %}
                <button class="btn btn-secondary">Unfollow</button>
            {% else %}
                <button class="btn btn-primary">Follow</button>
            {% endif %}
        </form>
    {% endif %}
</div>

<div class="profile-stats">
    <span>{{ followers_count }} Followers</span>
    <span>{{ following_count }} Following</span>
</div>

<hr>

<h3>Posts</h3>

{% for post in posts %}
    <div class="post">

        <div class="post-content" id="content-{{ post.id }}">
            {{ post.content }}
        </div>

        <div class="post-time">
            {{ post.timestamp }}
        </div>

        <div class="post-actions">
            ❤️ <span id="likes-{{ post.id }}">{{ post.likes.count }}</span> Likes

            {% if user.is_authenticated %}
                · <span style="cursor:pointer; color:#1da1f2;"
                        onclick="toggleLike({{ post.id }})">
                    Like
                  </span>
            {% endif %}

            {% if user == post.user %}
                · <span style="cursor:pointer; color:#1da1f2;"
                        onclick="editPost({{ post.id }})">
                    Edit
                  </span>
            {% endif %}
        </div>

    </div>
{% empty %}
    <p>No posts yet.</p>
{% endfor %}

</div>
{% endblock %}
