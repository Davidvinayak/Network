{% extends "network/layout.html" %}

{% block body %}
<div class="container">

<h2>All Posts</h2>

{% if user.is_authenticated %}
    <form method="post" class="new-post">
        {% csrf_token %}
        <textarea name="content" placeholder="What's on your mind?" rows="3"></textarea>
        <button type="submit">Post</button>
    </form>
{% endif %}

<hr>

{% for post in posts %}
    <div class="post">

        <div class="post-user">
            <a href="{% url 'profile' post.user.username %}">
                {{ post.user.username }}
            </a>
        </div>

        <div class="post-content" id="content-{{ post.id }}">
            {{ post.content }}
        </div>

        <div class="post-time">
            {{ post.timestamp }}
        </div>

        <div class="post-actions">
            ❤️ {{ post.likes.count }} Likes

            {% if user == post.user %}
                · <span style="cursor:pointer; color:#1da1f2;"
                        onclick="editPost({{ post.id }})">
                    Edit
                  </span>
            {% endif %}
        </div>

    </div>
{% empty %}
    <p>No posts yet.</p>
{% endfor %}

</div>
{% endblock %}
